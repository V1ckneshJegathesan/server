CREATE DATABASE IF NOT EXISTS `db1`;
connect  con1,localhost,root,,test;
connection con1;
USE `db1`;
DROP TABLE IF EXISTS `t1`;
CREATE TABLE `t1`(i BIGINT, t TEXT)ENGINE=xpand;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `i` bigint(20) DEFAULT NULL,
  `t` text DEFAULT NULL
) ENGINE=XPAND DEFAULT CHARSET=utf8
set character_set_client=utf8;
set collation_connection=utf8_bin;
set character_set_results=utf8;
INSERT INTO `t1` (i, t) VALUES (42, 'один');
INSERT INTO `t1` (i, t) VALUES (42, 'ноль');
SELECT * FROM `t1` ORDER BY `i` DESC, `t` DESC;
i	t
42	один
42	ноль
# examine the data on the backend:
# This should show that the SELECT has been pushed to the backend:
explain
select i, hex(t) from t1;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	PUSHED SELECT	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
select i, hex(t) from t1;
i	hex(t)
42	D0BDD0BED0BBD18C
42	D0BED0B4D0B8D0BD
# The above should match:
select hex('один') as row1, hex('ноль') as row2;
row1	row2
D0BED0B4D0B8D0BD	D0BDD0BED0BBD18C
UPDATE `t1` SET i=i+1,t='два' WHERE t='один';
SELECT * FROM `t1` ORDER BY `i` DESC, `t` DESC;
i	t
43	два
42	ноль
USE test;
UPDATE `db1`.`t1` SET i=i+1,t='три' WHERE t='два';
SELECT * FROM `db1`.`t1` ORDER BY `i` DESC, `t` DESC;
i	t
44	три
42	ноль
disconnect con1;
connection default;
DROP TABLE `db1`.`t1`;
USE test;
DROP DATABASE `db1`;
